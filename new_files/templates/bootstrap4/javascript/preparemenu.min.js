function prepareMenu(a,t,e){function i(a){$(c+r).removeClass(r),$(a).addClass(r),$(".root-menu").hasClass(r)?$(o).removeClass(r):$(o).addClass(r)}var s,n,d,r="active",l="parent",u="#currentMenu",o="#back",v="data-target",p="name",c=".menu.";$(".responsive-nav").on("click",".next",function(){var t=$(this),a=t.closest("div").attr("id"),e=t.prev("a").attr("title"),s=t.attr("data-target"),n=$("#"+s);0!=s?($(u).text(n.data(p)),$(o).attr(v,$(c+r).attr("id")),i(n)):(n=t.data("menu"),$.get(DIR_WS_BASE+"ajax.php",{ext:"bs4_get_subcat",type:"json",cPath:n,parent:a,name:e,func:"res",speed:1},function(a){""!=a&&null!=a?($("nav.responsive-nav").append(a[0]),t.attr("data-target","menu-"+a[1]),$(u).text(e),i("#menu-"+a[1])):alert("AJAX-FEHLER")}))}),$(".responsive-nav").on("click","#back",function(){var a=$("#"+$(c+r).data(l));$(u).text(a.data(p)),$(o).attr(v,$(a).attr("id")),i(a)}),$(".canvasmenu").is(":hidden")&&1==t&&function(a){$("#res-pushy").attr("class",""),$("#res-nav").attr("class",""),$("#res-header").remove();var t=".fullmenu ul#main";0!=a&&$(t+" ul").each(function(){$(this).attr("data-level")>a&&$(this).remove()}),$(t).addClass("navbar-nav d-flex flex-wrap mr-auto"),$(t+" > li").addClass("nav-item"),$(t+" > li.hassub").addClass("dropdown"),$(t+" > li:has(ul)").addClass("dropdown"),$(t+" > li > a").addClass("nav-link"),$(t+" ul").addClass("dropdown-menu"),$(t+" ul.dropdown-menu a").addClass("dropdown-item"),$(t+" li.hassub > a").addClass("dropdown-toggle"),$(t+" li:has(ul) > a").addClass("dropdown-toggle"),$(t+" li:has(ul) ul").addClass("dropdown-menu"),$(t+" li.nav-item li:has(ul)").addClass("dropdown-submenu"),$(".fullmenu").removeClass("invisible")}(a),!$(".canvasmenu").is(":visible")&&0!=t||1!=e||($("#res-pushy li.home").css("display","none"),$("#res-pushy ul#main").removeClass("nav navbar-nav").removeAttr("id"),n=".responsive-nav ",d="ul:not(:has(ul))",$(n+" ul").each(function(){$(n+d).each(function(){var a=$(this).attr("class"),t=$(this).parent().closest("ul").attr("class"),e=$(this).attr("title");$(this).addClass("xx"),$(this).attr("id",t),void 0!==e&&!1!==e||(e=$(this).prev("a").clone().children().remove().end().text().trim(),$(this).attr("title",e)),$(this).parent("li").append('<span class="next" data-target="menu-'+a+'"><span class="fa fa-chevron-right" aria-hidden="true"></span></span>')}),$(n+" ul").not(".xx").find(d).appendTo("nav.responsive-nav")}),$(n+" ul").each(function(){$(this).removeClass("xx");var a=$(this).attr("id"),t=$(this).attr("class"),e=$(this).attr("title"),s=$("#currentMenu").text();void 0===a?$(this).wrap('<div class="menu root-menu active" id="menu-'+t+'" data-name="'+s+'"></div>'):$(this).wrap('<div class="menu" id="menu-'+t+'" data-parent="menu-'+a+'" data-name="'+e+'"></div>')}),$(n).find("li.hassub:not(:has(span))").each(function(){var a=$(this).find(" a").attr("data-value");$(this).append('<span class="next" data-target="0" data-menu="'+a+'"><span class="fa fa-chevron-right" aria-hidden="true"></span></span>')}),$(".fullmenu").removeClass("invisible"),(s=$("#"+$(".responsive-nav li.Selected").closest("div").attr("id"))).data(l)&&($(u).text(s.data(p)),$(o).attr(v,s.data(l)),i(s)))}